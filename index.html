<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="styles.css">

    <title>Scroll me</title>
</head>
<body>

    <div id="main1" class="panel-one">
        PANEL ONE
    </div>
    
    <div id="main2" class="panel-two">
        PANEL TWO
    </div>

    <div id="main3" class="panel-three">
        PANEL THREE
    </div>

    <div id="main4" class="panel-four">
        PANEL FOUR
    </div>

    <script>

        var main1 = document.getElementById('main1');
        var main2 = document.getElementById('main2');
        var main3 = document.getElementById('main3');
        var main4 = document.getElementById('main4');

        console.log(main1.offsetTop);
        console.log(main2.offsetTop);
        console.log(main3.offsetTop);
        console.log(main4.offsetTop);

        let audio1 = new Audio('./audiofiles/panel-1-audio.mp3');
        let audio2 = new Audio('./audiofiles/panel-2-audio.wav');
        let audio3 = new Audio('./audiofiles/panel-3-audio.wav');
        let audio4 = new Audio('./audiofiles/panel-4-audio.wav');

        onload = audio1.play();
        
        let volumeMaster = 0.3;

        let currentpanel = 0;
        audio1.volume = volumeMaster;
        audio2.volume = 0.1;
        audio3.volume = volumeMaster;
        audio4.volume = volumeMaster;

        

        
        let ticking = false;
        let lastScrollPos = 0;

        let volumeChangeAmount = 0.01;

        function topOfElement(element){
            return element.offsetTop - element.offsetHeight / 2;
        };

        window.addEventListener('scroll', function(){

            console.log(topOfElement(main1));

            if(window.scrollY <= topOfElement(main2)){
                currentpanel = 1;
                console.log("panel 1");
                audio2.pause();
                audio1.play();

            }else if(window.scrollY > topOfElement(main2) & window.scrollY < topOfElement(main3)){
                currentpanel = 2;
                console.log("panel 2");
                audio1.pause();
                audio3.pause();
                audio2.play();

                audio3.volume = volumeMaster;

            }else if(window.scrollY > topOfElement(main3) & window.scrollY < topOfElement(main4)){
                currentpanel = 3;
                console.log("panel 3");
                audio2.pause();
                audio4.pause();
                audio3.play();


            }else if(window.scrollY > topOfElement(main4)){
                audio3.volume = volumeMaster;
                currentpanel = 4;
                console.log("panel 4");
                audio3.pause();
                audio4.play();

        }
        });

        
    </script>

</body>
</html>